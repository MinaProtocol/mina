(rule
 (targets assets.ml)
 (deps (source_tree assets))
 (action (run %{bin:ocaml-crunch} -m plain assets -o assets.ml)))

(library
 (name init)
 (public_name init)
 (libraries
   ;;opam libraries
   stdio
   integers
   astring
   async_ssl
   sexplib0
   async.async_rpc
   result
   graphql
   async_kernel
   async_unix
   uri
   core_kernel
   core_kernel.uuid
   core
   core.uuid
   base
   async
   cohttp
   graphql_parser
   async.async_command
   async_rpc_kernel
   base.caml
   base.base_internalhash_types
   graphql-cohttp
   cohttp-async
   graphql-async
   mirage-crypto-ec
   ;;local libraries
   bounded_types
   snark_profiler_lib
   archive_lib
   mina_wire_types
   perf_histograms
   one_or_two
   block_time
   child_processes
   mina_net2
   snark_worker
   allocation_functor
   blockchain_snark
   genesis_ledger_helper.lib
   transaction_inclusion_status
   error_json
   network_pool
   user_command_input
   network_peer
   logger
   itn_logger
   coda_genesis_proof
   data_hash_lib
   currency
   genesis_constants
   bash_colors
   graphql_lib
   node_status
   o1trace_webkit_event
   generated_graphql_queries
   itn_crypto
   mina_transaction
   mina_generators
   mina_user_error
   mina_ledger
   mina_block
   mina_lib
   mina_base
   cli_lib
   mina_graphql
   mina_state
   consensus
   mina_version
   o1trace
   protocol_version
   node_error_service
   genesis_ledger_helper
   signature_lib
   mina_base.import
   mina_numbers
   precomputed_values
   with_hash
   transaction_snark
   transaction_snark_tests
   transaction_protocol_state
   test_util
   file_system
   daemon_rpcs
   trust_system
   secrets
   participating_state
   staged_ledger
   mina_commands
   mina_runtime_config
   coda_genesis_ledger
   mina_networking
   sgn
   unsigned_extended
   mina_metrics
   group_map
   snark_work_lib
   mina_compile_config
   mina_transaction_logic
   verifier
   parallel
   random_oracle
   kimchi_backend
   kimchi_pasta
   kimchi_pasta.basic
   pickles_types
   pickles
   pickles.backend
   snark_params
   mina_signature_kind
   string_sign
   zkapp_command_builder
   internal_tracing
 )
 (instrumentation (backend bisect_ppx))
 (preprocessor_deps ../../../../../graphql_schema.json
                    ../../../../graphql-ppx-config.inc)
 (preprocess (pps ppx_deriving_yojson ppx_mina ppx_version
                  ppx_base ppx_assert ppx_bench ppx_bin_prot ppx_custom_printf
                  ppx_fields_conv ppx_fixed_literal ppx_here ppx_inline_test ppx_let
                  ppx_module_timer ppx_optional ppx_pipebang ppx_sexp_message
                  ppx_sexp_value ppx_string ppx_typerep_conv ppx_variants_conv
                  graphql_ppx -- %{read-lines:../../../../graphql-ppx-config.inc})))
