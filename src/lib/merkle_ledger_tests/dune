(library
 (name merkle_ledger_tests)
 (public_name merkle_ledger_tests)
 (library_flags -linkall)
 (modules (:standard \ "main"))
 (libraries
   ;; opam libraries
  alcotest
  async
  async_kernel
  async_unix
  base.base_internalhash_types
  base.caml
  bin_prot.shape
  core
  core.uuid
  core_kernel
  core_kernel.uuid
  extlib
  ppx_inline_test.config
  result
  sexplib0
  ;; local libraries
  base58_check
  codable
  currency
  data_hash_lib
  direction
  key_value_database
  merkle_address
  merkle_ledger
  merkle_mask
  mina_base
  mina_numbers
  signature_lib
  )
 (preprocess
  (pps ppx_version ppx_jane ppx_compare ppx_deriving.show ppx_deriving_yojson))
 (instrumentation (backend bisect_ppx))
 (inline_tests
  (libraries rocks))
 (synopsis "Testing account databases"))


(tests
 (names main)
 (flags
  (:standard -warn-error +a)
  -open
  Merkle_ledger_tests)
 (libraries
  alcotest
  merkle_ledger_tests)
 (modules main)
 (action (run % {test}))
 (instrumentation
  (backend bisect_ppx)))
