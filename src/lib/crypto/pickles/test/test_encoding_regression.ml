(** Testing
    -------
    Component:  Pickles
    Invocation: dune exec \
                  src/lib/crypto/pickles/test/test_encoding_regression.exe
    Subject:    Regression tests for base58 encoding of Pickles types.
 *)

module SLV = Pickles__Side_loaded_verification_key

(* Side_loaded_verification_key.dummy *)
let test_side_loaded_verification_key_dummy_encoding () =
  let expected =
    "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"
  in
  let got = SLV.to_base58_check SLV.dummy in
  Alcotest.(check string)
    "Side_loaded_verification_key.dummy encoding is stable" expected got

let () =
  let open Alcotest in
  run "Base58 encoding regression"
    [ ( "base58 encoding regression"
      , [ test_case "Side_loaded_verification_key dummy encoding" `Quick
            test_side_loaded_verification_key_dummy_encoding
        ] )
    ]
