(library
 (name generated_graphql_queries)
 (public_name generated_graphql_queries)
 (libraries
  async
  base
  cohttp
  cohttp-async
  core
  graphql-async
  graphql-cohttp
  graphql_lib
  mina_base
  yojson)
 (instrumentation
  (backend bisect_ppx))
 (preprocessor_deps
  ../../../graphql_schema.json
  ../../graphql-ppx-config.inc)
 (preprocess
  (pps
   ppx_base
   ppx_version
   graphql_ppx
   --
   %{read-lines:../../graphql-ppx-config.inc})))

(rule
 (targets generated_graphql_queries.ml)
 (deps
  (:< gen/gen.exe))
 (action
  (run %{<} %{targets})))
