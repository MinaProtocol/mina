Fix a bug that causes the daemon to freeze when shut down with a signal like
SIGINT or SIGTERM, and not with `mina client stop`. The frontier visualization
debug diagram that is written at shutdown will now display a total_currency of 0
for every mask. This functionality will be restored when the efficiency of the
underlying operation is improved.
